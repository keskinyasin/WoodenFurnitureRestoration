@inherits LayoutComponentBase
@using WoodenFurnitureRestoration.Blazor.Services
@inject NavigationManager Navigation

<div class="admin-layout">
    <nav class="admin-sidebar">
        <div class="sidebar-header">
            <a href="/admin/dashboard">
                <i class="bi bi-hammer"></i>
                <span>Admin Panel</span>
            </a>
        </div>

        <div class="sidebar-menu">
            <div class="menu-section">
                <span class="section-title">📊 Genel</span>
                <a href="/admin/dashboard" class="menu-item @GetActive("/admin/dashboard")">
                    <i class="bi bi-speedometer2"></i> Dashboard
                </a>
            </div>

            <div class="menu-section">
                <span class="section-title">🛒 Satış Yönetimi</span>
                <a href="/admin/orders" class="menu-item @GetActive("/admin/orders")">
                    <i class="bi bi-cart"></i> Siparişler
                </a>
                <a href="/admin/orderdetails" class="menu-item @GetActive("/admin/orderdetails")">
                    <i class="bi bi-list-check"></i> Sipariş Detayları
                </a>
                <a href="/admin/payments" class="menu-item @GetActive("/admin/payments")">
                    <i class="bi bi-credit-card"></i> Ödemeler
                </a>
                <a href="/admin/invoices" class="menu-item @GetActive("/admin/invoices")">
                    <i class="bi bi-receipt"></i> Faturalar
                </a>
                <a href="/admin/shippings" class="menu-item @GetActive("/admin/shippings")">
                    <i class="bi bi-truck"></i> Kargolar
                </a>
            </div>

            <div class="menu-section">
                <span class="section-title">📦 Ürün Yönetimi</span>
                <a href="/admin/categories" class="menu-item @GetActive("/admin/categories")">
                    <i class="bi bi-folder"></i> Kategoriler
                </a>
                <a href="/admin/products" class="menu-item @GetActive("/admin/products")">
                    <i class="bi bi-box-seam"></i> Ürünler
                </a>
                <a href="/admin/inventories" class="menu-item @GetActive("/admin/inventories")">
                    <i class="bi bi-boxes"></i> Envanter
                </a>
                <a href="/admin/tags" class="menu-item @GetActive("/admin/tags")">
                    <i class="bi bi-tags"></i> Etiketler
                </a>
            </div>

            <div class="menu-section">
                <span class="section-title">🔧 Restorasyon</span>
                <a href="/admin/restorations" class="menu-item @GetActive("/admin/restorations")">
                    <i class="bi bi-tools"></i> Restorasyonlar
                </a>
                <a href="/admin/restorationservices" class="menu-item @GetActive("/admin/restorationservices")">
                    <i class="bi bi-wrench"></i> Hizmetler
                </a>
            </div>

            <div class="menu-section">
                <span class="section-title">👥 Kullanıcılar</span>
                <a href="/admin/customers" class="menu-item @GetActive("/admin/customers")">
                    <i class="bi bi-people"></i> Müşteriler
                </a>
                <a href="/admin/suppliers" class="menu-item @GetActive("/admin/suppliers")">
                    <i class="bi bi-building"></i> Tedarikçiler
                </a>
                <a href="/admin/suppliermaterials" class="menu-item @GetActive("/admin/suppliermaterials")">
                    <i class="bi bi-bricks"></i> Malzemeler
                </a>
                <a href="/admin/addresses" class="menu-item @GetActive("/admin/addresses")">
                    <i class="bi bi-geo-alt"></i> Adresler
                </a>
            </div>

            <div class="menu-section">
                <span class="section-title">💬 İçerik</span>
                <a href="/admin/reviews" class="menu-item @GetActive("/admin/reviews")">
                    <i class="bi bi-star"></i> Yorumlar
                </a>
                <a href="/admin/blogposts" class="menu-item @GetActive("/admin/blogposts")">
                    <i class="bi bi-journal-text"></i> Blog Yazıları
                </a>
            </div>
        </div>

        <div class="sidebar-footer">
            <a href="/logout" class="btn-logout">
                <i class="bi bi-box-arrow-right"></i> Çıkış Yap
            </a>
        </div>
    </nav>

    <main class="admin-content">
        <div class="content-header">
            <div class="breadcrumb-nav">
                <span>Admin Panel</span>
            </div>
        </div>
        <div class="content-body">
            @Body
        </div>
    </main>
</div>

@code {
    private string currentUrl = "";

    protected override void OnInitialized()
    {
        currentUrl = Navigation.Uri;
        Navigation.LocationChanged += OnLocationChanged;
    }

    private void OnLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        currentUrl = e.Location;
        StateHasChanged();
    }

    private string GetActive(string path) => currentUrl.Contains(path) ? "active" : "";

    public void Dispose()
    {
        Navigation.LocationChanged -= OnLocationChanged;
    }
}

<style>
    .admin-layout {
        display: flex;
        min-height: 100vh;
        background-color: #f5f7fa;
    }

    /* Sidebar */
    .admin-sidebar {
        width: 260px;
        background: linear-gradient(180deg, #1e3a5f 0%, #0d1b2a 100%);
        display: flex;
        flex-direction: column;
        position: fixed;
        height: 100vh;
        overflow-y: auto;
    }

    .sidebar-header {
        padding: 20px;
        border-bottom: 1px solid rgba(255,255,255,0.1);
    }

        .sidebar-header a {
            color: white;
            text-decoration: none;
            font-size: 1.3rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar-header i {
            font-size: 1.5rem;
            color: #4dabf7;
        }

    /* Menu */
    .sidebar-menu {
        flex: 1;
        padding: 15px 0;
        overflow-y: auto;
    }

    .menu-section {
        margin-bottom: 15px;
    }

    .section-title {
        display: block;
        padding: 10px 20px 5px;
        font-size: 0.75rem;
        text-transform: uppercase;
        color: #8fa3b8;
        letter-spacing: 1px;
    }

    .menu-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 20px;
        color: #c5d3e0;
        text-decoration: none;
        font-size: 0.9rem;
        transition: all 0.2s ease;
        border-left: 3px solid transparent;
    }

        .menu-item:hover {
            background-color: rgba(255,255,255,0.05);
            color: white;
        }

        .menu-item.active {
            background-color: rgba(77, 171, 247, 0.15);
            color: #4dabf7;
            border-left-color: #4dabf7;
        }

        .menu-item i {
            font-size: 1.1rem;
            width: 20px;
            text-align: center;
        }

    /* Footer */
    .sidebar-footer {
        padding: 20px;
        border-top: 1px solid rgba(255,255,255,0.1);
    }

    .btn-logout {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        width: 100%;
        padding: 12px;
        background-color: rgba(255, 107, 107, 0.2);
        color: #ff6b6b;
        border: none;
        border-radius: 8px;
        text-decoration: none;
        font-size: 0.9rem;
        transition: all 0.2s;
    }

        .btn-logout:hover {
            background-color: #ff6b6b;
            color: white;
        }

    /* Content */
    .admin-content {
        flex: 1;
        margin-left: 260px;
        display: flex;
        flex-direction: column;
    }

    .content-header {
        background: white;
        padding: 15px 25px;
        border-bottom: 1px solid #e0e6ed;
    }

    .breadcrumb-nav {
        color: #6c757d;
        font-size: 0.9rem;
    }

    .content-body {
        padding: 25px;
        flex: 1;
    }

    /* Scrollbar */
    .sidebar-menu::-webkit-scrollbar {
        width: 5px;
    }

    .sidebar-menu::-webkit-scrollbar-track {
        background: transparent;
    }

    .sidebar-menu::-webkit-scrollbar-thumb {
        background: rgba(255,255,255,0.2);
        border-radius: 3px;
    }
</style>